<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>我的hexo改造 | Sw Home</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="我主要对hexo改动了两大处：

主题
图片(七牛)">
<meta property="og:type" content="article">
<meta property="og:title" content="我的hexo改造">
<meta property="og:url" content="http://swth.tk/my-install-hexo/">
<meta property="og:site_name" content="Sw Home">
<meta property="og:description" content="我主要对hexo改动了两大处：

主题
图片(七牛)">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="我的hexo改造">
<meta name="twitter:description" content="我主要对hexo改动了两大处：

主题
图片(七牛)">

  
    <link rel="alternative" href="/atom.xml" title="Sw Home" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">

  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>
<body>
  <div id="container">
    <div id="wrap">
      <!-- <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Sw Home</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
      </nav>
    </div>
  </div>
</header> -->
<header id="header">
  <div id="header-nav">
    <div >
      
        <a class="main-nav-link" href="/">Home</a>
      
        <a class="main-nav-link" href="/archives">Archives</a>
      
    </div>
    <div >
      
          <a id="nav-rss-link" class="main-nav-rss" href="/atom.xml" title="RSS Feed">RSS</a>
      
    </div>
  </div>
  <div id="header-title">
    <h1 id="logo-wrap">
        <a href="/" id="logo">Sw Home</a>
      </h1>
      
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-my-install-hexo" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/my-install-hexo/" class="article-date">
  <time datetime="2014-07-09T13:06:14.000Z" itemprop="datePublished">7月 9 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/hexo/">hexo</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      我的hexo改造
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>我主要对hexo改动了两大处：</p>
<ul>
<li>主题</li>
<li>图片(七牛)<a id="more"></a>

</li>
</ul>
<h1 id="第一改：修改主题，加速访问">第一改：修改主题，加速访问</h1>
<h2 id="去掉google提供的cdn加快打开速度">去掉google提供的cdn加快打开速度</h2>
<p>由于hexo默认使用了google的cdn节点且国内的google被屏蔽了，所以需要改一些地方，使用百度的cdn。</p>
<p>我是用的是默认的<code>landscape</code>主题。</p>
<p>修改文件<code>themes\landscape\layout\_partial\after-footer.ejs</code>，替换jquery库文件:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></div></pre></td></tr></table></figure>

<p>改成</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"http://libs.baidu.com/jquery/2.0.3/jquery.min.js"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></div></pre></td></tr></table></figure>

<p>文件<code>themes\landscape\layout\_partial\head.ejs</code>:<br>没找好替代品，就先删掉吧·····(我觉得应该是哪种好看的字体)</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">link</span> <span class="attribute">href</span>=<span class="value">"http://fonts.googleapis.com/css?family=Source+Code+Pro"</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">type</span>=<span class="value">"text/css"</span>&gt;</span></div></pre></td></tr></table></figure>

<h2 id="修改主题">修改主题</h2>
<p>我对主题主要的改动在</p>
<ul>
<li>换配色</li>
<li>顶部条悬浮</li>
<li>加入多说评论</li>
</ul>
<h4 id="加入多说">加入多说</h4>
<p>文件<code>themes\landscape\layout\_partial\article.ejs</code>末尾:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="vbscript">&lt;% <span class="keyword">if</span> (!index && post.comments && config.disqus_shortname){ %&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">section</span> <span class="attribute">id</span>=<span class="value">"comments"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"disqus_thread"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">noscript</span>&gt;</span>Please enable JavaScript to view the <span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"//disqus.com/?ref_noscript"</span>&gt;</span>comments powered by Disqus.<span class="tag">&lt;/<span class="title">a</span>&gt;</span><span class="tag">&lt;/<span class="title">noscript</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">section</span>&gt;</span></div><div class="line"><span class="vbscript">&lt;% } %&gt;</span></div></pre></td></tr></table></figure>

<p>修改为</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="vbscript">&lt;% <span class="keyword">if</span> (!index && post.comments){ %&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">section</span> <span class="attribute">id</span>=<span class="value">"comments"</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- 多说评论框 start --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"ds-thread"</span> <span class="attribute">data-thread-key</span>=<span class="value">"&lt;%= page.source %&gt;"</span> <span class="attribute">data-title</span>=<span class="value">"&lt;%= page.title %&gt;"</span> <span class="attribute">data-url</span>=<span class="value">"&lt;%= page.permalink %&gt;"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- 多说评论框 end --&gt;</span></div><div class="line"><span class="comment">&lt;!-- 多说公共JS代码 start (一个网页只需插入一次) --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line"><span class="keyword">var</span> duoshuoQuery = {short_name:<span class="string">"swth"</span>};<span class="xml"><span class="comment">&lt;!-- 这里注意！&gt;</span></span></div><div class="line">  (function() {</div><div class="line">    var ds = document.createElement('script');</div><div class="line">    ds.type = 'text/javascript';ds.async = true;</div><div class="line">    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';</div><div class="line">    ds.charset = 'UTF-8';</div><div class="line">    (document.getElementsByTagName('head')[0] </div><div class="line">     || document.getElementsByTagName('body')[0]).appendChild(ds);</div><div class="line">  })();</div><div class="line">  <span class="tag">&lt;/<span class="title">script</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- 多说公共JS代码 end --&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">section</span>&gt;</span></div><div class="line"><span class="vbscript">&lt;% } %&gt;</span></div></pre></td></tr></table></figure>

<p>注意<code>{short_name:</code>的修改。使用前先去<a href="duoshuo.com">多说</a>注册一下。</p>
<h1 id="第二改：图片存储在七牛">第二改：图片存储在七牛</h1>
<p>我用了种特殊的方式，避免了</p>
<ul>
<li>来回来去粘贴图片地址</li>
<li>上传下载图片不便利</li>
<li>图片不好管理<br>并且提高了效率。</li>
</ul>
<p>用类似于’qn:pictureName’作为src，在客户端用js调出真正的图片。<br>可能存在的问题</p>
<ul>
<li>兼容性，不支持js的浏览器(有么)看不见图片</li>
<li>RSS看不见图片</li>
</ul>
<h4 id="实现方法">实现方法</h4>
<p>1.用’qrsync’同步图片到七牛（<a href="http://developer.qiniu.com/docs/v6/tools/qrsync.html" target="_blank" rel="external">使用方法</a>）<br>2.修改<code>script.js</code>(在<code>landscape\source\js</code>里)，加入</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span><span class="params">($)</span></span>{</div><div class="line"></div><div class="line">    ...........</div><div class="line"></div><div class="line">  $(<span class="string">'img'</span>).each(<span class="function"><span class="keyword">function</span><span class="params">()</span></span>{</div><div class="line">    src=$(<span class="keyword">this</span>).attr(<span class="string">'src'</span>);</div><div class="line">    <span class="keyword">if</span> (src.indexOf(<span class="string">'qn:'</span>)==<span class="number">0</span>){</div><div class="line">      $(<span class="keyword">this</span>).attr(<span class="string">'src'</span>,<span class="string">'http://swth-tk-blog.qiniudn.com/blog_img/'</span>+src.substring(<span class="number">3</span>,src.length)+<span class="string">'.jpg'</span>);</div><div class="line">    } <span class="comment">//别忘了替换相关内容</span></div><div class="line">  });</div><div class="line"></div><div class="line">  ..............</div><div class="line"></div><div class="line"></div><div class="line">})(jQuery);</div></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://swth.tk/my-install-hexo/" data-id="wieuysjhihvusq5v" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hexo/">hexo</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/hello-world/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Hello World
        
      </div>
    </a>
  
  
    <a href="/example/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">书写模板</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
<!-- 多说评论框 start -->
  <div class="ds-thread" data-thread-key="_posts/my-install-hexo.md" data-title="我的hexo改造" data-url="http://swth.tk/my-install-hexo/"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"swth"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>
<!-- 多说公共JS代码 end -->
</section>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a><span class="category-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/example/" style="font-size: NaNpx;">example</a><a href="/tags/hexo/" style="font-size: NaNpx;">hexo</a><a href="/tags/markdown/" style="font-size: NaNpx;">markdown</a><a href="/tags/心理学/" style="font-size: NaNpx;">心理学</a><a href="/tags/读后感/" style="font-size: NaNpx;">读后感</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08">August 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07">July 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06">June 2014</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/bookReading-theLiarInYourLife/">《假相》</a>
          </li>
        
          <li>
            <a href="/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/my-install-hexo/">我的hexo改造</a>
          </li>
        
          <li>
            <a href="/example/">书写模板</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2014 sw<br>
      Powered by <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="http://libs.baidu.com/jquery/2.0.3/jquery.min.js"></script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>